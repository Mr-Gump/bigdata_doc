# 第2章 Maxwell原理

Maxwell 的工作原理是实时读取 MySQL 数据库的二进制日志（ Binlog ），从中获取变更数据，再将变更数据以 JSON 格式发送至 Kafka 等流处理平台。

## 2.1 MySQL二进制日志

二进制日志（ Binlog ）是 MySQL 服务端非常重要的一种日志，它会保存 MySQL 数据库的所有数据变更记录。Binlog 的主要作用包括主从复制和数据恢复。Maxwell 的工作原理和主从复制密切相关。

## 2.2 MySQL主从复制

MySQL 的主从复制，就是用来建立一个和主数据库完全一样的数据库环境，这个数据库称为从数据库。

**1）主从复制的应用场景如下：**

（1）做数据库的热备：主数据库服务器故障后，可切换到从数据库继续工作。

（2）读写分离：主数据库只负责业务数据的写入操作，而多个从数据库只负责业务数据的查询工作，在读多写少场景下，可以提高数据库工作效率。

**2）主从复制的工作原理如下：**

（1）Master 主库将数据变更记录，写到二进制日志( binary log )中

（2）Slave 从库向 mysql master 发送 dump 协议，将 master 主库的 binary log events 拷贝到它的中继日志( relay log )

（3）Slave 从库读取并回放中继日志中的事件，将改变的数据同步到自己的数据库。

![image-20230221191539586](https://cos.gump.cloud/uPic/image-20230221191539586.png)

## 2.3 Maxwell原理

很简单，就是将自己伪装成 slave，并遵循 MySQL 主从复制的协议，从 master 同步数据。

